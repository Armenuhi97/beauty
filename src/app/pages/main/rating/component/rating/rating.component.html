<nz-select [(ngModel)]="selectedValue" (ngModelChange)="filter($event)">
    <nz-option *ngFor="let option of statusList" [nzValue]="option.key" [nzLabel]="option.text | translate"></nz-option>
</nz-select>
<nz-table #reviewsTable [nzData]="reviews" (nzPageIndexChange)="nzPageIndexChange($event)" [nzTotal]="total"
    [nzPageSize]="pageSize" [nzPageIndex]="pageIndex" [nzFrontPagination]="false">
    <thead>
        <tr>
            <th>N</th>
            <th>{{'REVIEWS.DATE' | translate}}</th>
            <th>{{'REVIEWS.FROM' | translate}}</th>
            <th>{{'REVIEWS.TO' | translate}}</th>
            <th>{{'REVIEWS.RATING' | translate}}</th>
            <th>{{'REVIEWS.STATUS' | translate}}</th>
            <th></th>
        </tr>
    </thead>
    <tbody>

        <tr *ngFor="let review of reviewsTable.data;let ind=index">
            <td>{{(ind + 1)+((pageIndex-1)*10) }}</td>
            <td>{{review.created_at | date:'yyyy-MM-dd' }}</td>
            <td>
                <div>
                    {{review.from_user_details.user.first_name}} {{review.from_user_details.user.last_name}}
                </div>
                <div class="role">
                    ({{setRole(review.from_user_details.user_role.code) | translate}})
                </div>
            </td>
            <td>
                <div>
                    {{review.to_user_details.user.first_name}} {{review.to_user_details.user.last_name}}
                </div>
                <div class="role">
                    ({{setRole(review.to_user_details.user_role.code) | translate}})
                </div>
            </td>
            <td>{{review.rating}}</td>
            <td><span
                    [ngClass]="{'red':review.status == 'canceled','yellow':review.status == 'pending','green':review.status == 'accepted'}">
                    {{review.status}}</span></td>

            <td>
                <a (click)="showModal(ind)" class="action-btn">
                    <i nz-icon nzType="edit" nzTheme="outline"></i>
                </a>
            </td>
        </tr>
    </tbody>
</nz-table>


<nz-modal [nzVisible]="isVisible" (nzOnCancel)="closeModal()" nzWidth="870px">
    <div *nzModalContent>
        <!-- <div class="d-flex comment-person-content">
            <div></div>
            <div>-></div>
            <div></div>

        </div> -->
        <nz-descriptions [nzColumn]="2">
            <nz-descriptions-item [nzTitle]="'REVIEWS.FROM' | translate"><span
                    class="status-primary">{{activeReview?.from_user_details?.user?.first_name}}
                    {{activeReview?.from_user_details?.user?.last_name}}
                    ({{setRole(activeReview?.from_user_details?.user_role?.code) | translate}})</span></nz-descriptions-item>
            <nz-descriptions-item [nzTitle]="'REVIEWS.TO' | translate">
                {{activeReview?.to_user_details?.user?.first_name}}
                {{activeReview?.to_user_details?.user?.last_name}} (
                {{setRole(activeReview?.to_user_details?.user_role?.code) | translate}})</nz-descriptions-item>

            <nz-descriptions-item [nzTitle]="'REVIEWS.RATING' | translate">{{activeReview?.rating}}
            </nz-descriptions-item>
        </nz-descriptions>

        <nz-card [nzTitle]="'REVIEWS.REVIEW' | translate">
            <p>{{activeReview?.comment}}</p>
        </nz-card>
    </div>
    <div *nzModalFooter>
        <div *ngIf="activeReview?.status == 'pending'">
            <button nz-button nzType="default" (click)="cancelRating()">{{'REVIEWS.REJECT' | translate}}</button>
            <button nz-button nzType="primary" (click)="acceptRating()">{{'REVIEWS.ACCEPT' | translate}}</button>
        </div>
    </div>
</nz-modal>